<html lang="zh-CN"><head><meta charSet="UTF-8"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><link rel="apple-touch-icon" sizes="180x180" href="../ydoc/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="../ydoc/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="../ydoc/images/favicon-16x16.png"/><link rel="manifest" href="../ydoc/images/manifest.json"/><link rel="mask-icon" href="../ydoc/images/safari-pinned-tab.svg" color="#5bbad5"/><meta name="theme-color" content="#ffffff"/><meta http-equiv="Cache-Control" content="no-transform"/><meta http-equiv="Cache-Control" content="no-siteapp"/><title>Compatibility-English</title><link rel="stylesheet" href="../ydoc/styles/style.css"/><meta name="author" content="ymfe"/><meta name="keywords"/><meta name="description" content="website description"/><meta id="releativePath" content=".."/><link rel="stylesheet" href="../ydoc/ydoc-plugin-search/search.css"/></head><body><div class="g-doc"><div class="m-aside"><div class="m-summary" id="js-menu"><div class="m-summary-content" id="js-menu-content"><div class="m-summary-block"><ul class="m-summary-list"><li class="item"><a href="install.html" class="href">install</a></li><li class="item"><a href="author.html" class="href">author</a></li><li class="item"><a href="intention.html" class="href">intention</a></li><li class="item"><a href="" class="href">compat</a></li><li class="item"><a href="version.html" class="href">log</a></li><li class="item"><a href="ssr.html" class="href">ssr</a></li><li class="item"><a href="router.html" class="href">router</a></li><li class="item"><a href="store.html" class="href">state manager</a></li></ul></div></div></div><div class="m-summary-switch" id="js-summary-switch"><svg viewBox="0 0 926.23699 573.74994" version="1.1" x="0px" y="0px" width="15" height="15" class="bottom"><g transform="translate(904.92214,-879.1482)"><path d="m -673.67664,1221.6502 -231.2455,-231.24803 55.6165,-55.627 c 30.5891,-30.59485 56.1806,-55.627 56.8701,-55.627 0.6894,0 79.8637,78.60862 175.9427,174.68583 l 174.6892,174.6858 174.6892,-174.6858 c 96.079,-96.07721 175.253196,-174.68583 175.942696,-174.68583 0.6895,0 26.281,25.03215 56.8701,55.627 l 55.6165,55.627 -231.245496,231.24803 c -127.185,127.1864-231.5279,231.248 -231.873,231.248 -0.3451,0 -104.688,-104.0616 -231.873,-231.248 z" fill="#fff"></path></g></svg><svg viewBox="0 0 926.23699 573.74994" version="1.1" x="0px" y="0px" width="15" height="15" class="top"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="aaa" fill="#fff" fill-rule="nonzero"><path d="M231.2455,342.502 L0,111.25397 L55.6165,55.62697 C86.2056,25.03212 111.7971,-2.99999998e-05 112.4866,-2.99999998e-05 C113.176,-2.99999998e-05 192.3503,78.60859 288.4293,174.6858 L463.1185,349.3716 L637.8077,174.6858 C733.8867,78.60859 813.060896,-2.99999997e-05 813.750396,-2.99999997e-05 C814.439896,-2.99999997e-05 840.031396,25.03212 870.620496,55.62697 L926.236996,111.25397 L694.9915,342.502 C567.8065,469.6884 463.4636,573.75 463.1185,573.75 C462.7734,573.75 358.4305,469.6884 231.2455,342.502 Z" id="Shape" transform="translate(463.118498, 286.874985) scale(1, -1) translate(-463.118498, -286.874985) "></path></g></g></svg></div></div><div class="m-main" id="js-panel"><header class="m-header" id="js-header"><div class="m-header-title js-logo"><a href="../index.html" target="_self"><img class="logo" width="36" src="../anujs/favicon@1x.png"/><h6 class="name">anujs</h6></a></div><div><div class="m-search">
      <div class="icon">&#xf0fd;</div>
      <input type="text" class="input js-input" placeholder="搜索" />
      <div class="m-search-result js-search-result"></div>
    </div></div><nav class="m-header-nav js-nav"><ul class="m-header-items"><li class="item active"><a class="href" href="index.html">English</a></li><li class="item "><a class="href" href="../ch/index.html">中文</a></li></ul></nav><div id="js-nav-btn" class="m-header-btn ui-font-ydoc"></div></header><div class="m-content" id="js-content"><div id="markdown-body" class="m-content-container markdown-body"><h1>Compatibility</h1>
<h2 id="language-patches">language patches</h2>
<ol>
<li><a href="https://github.com/juliangruber/isarray/" target="_blank">Array.isArray</a></li>
<li><a href="https://github.com/ryanhefner/Object.assign" target="_blank">Object.assign</a></li>
<li><a href="https://github.com/flowersinthesand/stringifyJSON" target="_blank">JSON.stringify</a></li>
<li><a href="https://github.com/paulmillr/console-polyfill" target="_blank">console-polyfill</a></li>
<li><a href="https://github.com/ljharb/object-keys" target="_blank">Object.keys</a></li>
<li><a href="https://github.com/ljharb/object-is" target="_blank">Object.is</a></li>
<li><a href="polyfill/Array.prototype.forEach">Array.prototype.forEach</a></li>
<li><a href="https://github.com/leahciMic/polyfill-function-prototype-bind" target="_blank">Function.prototype.bind</a></li>
</ol>
<p>Or directly use the dynamic patching scheme provided by https://polyfill.io/</p>
<pre><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.polyfill.io/v2/polyfill.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<h2 id="replace-core-library">Replace Core Library</h2>
<p>The core library should be changed from <strong>dist/React.js</strong> to <strong>dist/ReactIE.js</strong></p>
<p>It just added some special events compatible patch and innerHTML repair process on React.js.</p>
<p>The IE event patch is for the repair of some non-bubble events (input, change, submit, focus, blur), and the handling of some specific event attributes (pageX, pageY of the mouse event, which of the keyboard events, wheelDetla of the scroll event)</p>
<p>http://www.cnblogs.com/rubylouvre/p/5080464.html</p>
<h2 id="animation">Animation</h2>
<p>If the user uses an animation library such as react-transition-group, please note the patch that introduces <strong>requestAnimationFrame</strong></p>
<h2 id="uglify">Uglify</h2>
<p>If you use compression, you need to deal with uglify-js, because IE6-8, for <strong>map.delete(&quot;ddd&quot;)</strong>, <strong>modulex.default</strong> will write syntax error
Because keywords cannot be attribute names and method names. We can handle it with <code>es3ify-webpack-plugin</code> or ʻes3ify-loader`.</p>
<pre><code class="language-javascript"><span class="token comment">//npm install uglifyjs-webpack-plugin@1.0.0-beta.2  </span>
<span class="token comment">//UglifyJs3</span>
<span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    parallel<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        workers<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    uglifyOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        mangle<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            eval<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            toplevel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        parse<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            html5_comments<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            comments<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            ascii_only<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            beautify<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ecma<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        ie8<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        compresqs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            properties<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            unsafe<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            unsafe_comps<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            unsafe_math<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            unsafe_proto<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            unsafe_regexp<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            unsafe_Func<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            dead_code<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            unused<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            conditionals<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            keep_fargs<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            drop_console<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            drop_debugger<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            reduce_vars<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            if_return<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            comparisons<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            evaluate<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            booleans<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            typeofs<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            loops<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            toplevel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            top_retain<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            hoist_funs<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            hoist_vars<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            inline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            join_vars<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            cascade<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            collapse_vars<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            reduce_vars<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            negate_iife<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            pure_getters<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            pure_funcs<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">// arrows: true,</span>
            passes<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            ecma<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    sourceMap<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre>
<h2 id="react.createclass">React.createClass</h2>
<p>React15 uses createClass to create the class. If you need this API, you can include <code>anujs/lib/createClass.js</code> in webpack.</p>
</div><div class="m-content-container m-paging"><div class="m-paging-prev m-paging-item"><a href="intention.html" class="href"><span class="ui-font-ydoc"></span>intention</a></div><div class="m-paging-next m-paging-item"><a href="version.html" class="href">log<span class="ui-font-ydoc"></span></a></div></div></div></div></div><div></div><script>
    var $content = document.getElementById('js-content');
    var $summaryItems = Array.prototype.slice.call(document.querySelectorAll('#js-menu .href'));
    var $menu = document.getElementById('js-menu');
    if ($menu && sessionStorage.menuScrollTop) {
		$menu.scrollTop = sessionStorage.menuScrollTop;
    }
    // 刷新页面但不切换 pathname 的时候，内容区恢复到记忆的高度
    if ($content && sessionStorage.contentScrollTop && window.location.pathname == sessionStorage.locationPathname) {
      $content.scrollTop = sessionStorage.contentScrollTop;
    }
    sessionStorage.setItem('locationPathname', window.location.pathname);</script><script src="../ydoc/scripts/plugins/dollar.min.js"></script><script src="../ydoc/scripts/plugins/responsive-nav.min.js"></script><script src="../ydoc/scripts/plugins/slideout.min.js"></script><script src="../ydoc/scripts/app.js"></script><script src="../ydoc/ydoc-plugin-search/core.js"></script><script src="../ydoc/ydoc-plugin-search/search.js"></script><script src="../search_json.js"></script></body></html>