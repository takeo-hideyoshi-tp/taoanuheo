<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type='text/javascript' src="./dist/React.js"></script>
   <!-- <script type='text/javascript' src="./test/react.js"></script>
    <script type='text/javascript' src="./test/react-dom.js"></script>-->
    <script type='text/javascript' src="./lib/babel.js"></script>
    <script type="text/babel">

      </script>
</head>

<body>

    <pre>应该等于

    </pre>
    <h1 id='example' class="root">

    </h1>
    <script type='text/babel'>
          var container = document.getElementById('example');
          var div = container;
          if (!window.ReactDOM) {
              window.ReactDOM = React;
          }
          var PropTypes = React.PropTypes
          var expect = function(a) {
              return {
                  toBe: function(b) {
                      console.log(a, 'vs', b, a === b);
                  },
                  toEqual(b) {
                      console.log(a, 'vs', b, a + '' === b + '');
                  }
              };
          };
          var list = [];
          function logger(e) {
              list.push(e);
          }
          class App extends React.Component {
              constructor(props) {
                  super(props);
                  this.state = {
                      aaa: "aaa"
                  };
              }
              componentWillMount() {
                  this.setState(
                      {
                          aaa: "bbb"
                      },
                      function () {
                          logger("1111");
                      }
                  );
              }
              componentDidMount() {
                  console.log(this)
                  this.state.aaa = "cccc";
                  this.forceUpdate(function () {
                      logger("2222");
                  });
                  this.state.aaa = "dddd";
                  this.forceUpdate(function () {
                      logger("3333");
                  });
                  logger("did mount");
              }
              componentWillUpdate() {
                  logger("app will update");
              }
              componentDidUpdate() {
                  logger("app did update");
              }
  
              render() {
                  logger("render " + this.state.aaa);
                  return <div>{this.state.aaa}</div>;
              }
          }
          ReactDOM.render(<App />, div, function () {
              logger("ReactDOM cb");
          });
  
          var list2 = [
              "render bbb",
              "did mount",
              "1111",
              "ReactDOM cb",
              "app will update",
              "render dddd",
              "app did update",
              "2222",
              "3333"
          ]
          expect(list.join("\n")).toBe(list2.join("\n"));

</script>


</html>