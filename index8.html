<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
   <script type='text/javascript' src="./dist/React.js"></script>
   <!-- <script type='text/javascript' src="./test/react.js"></script>
    <script type='text/javascript' src="./test/react-dom.js"></script>-->
    <script type='text/javascript' src="./lib/babel.js"></script>
    <script type="text/babel">

      </script>
</head>

<body>

    <pre>应该等于
           
          
        </pre>
    <h1 id='example' class="root">

    </h1>
    <script type='text/babel'>
            var container = document.getElementById("example")
            var div = container;
          if(!window.ReactDOM){
            window. ReactDOM = React
          }
           // 
            var expect = function(a) {
                return {
                    toBe: function(b) {
                        console.log(a,"vs", b, a === b)
                    },
                    toEqual(b){
                        console.log(a,"vs", b, a +""=== b+"")
                    },
                }
            }  
            var list = [];
            var flag = 1;
            function logger(e){
                list.push(e);
            }
            class A extends React.Component {
                constructor(props) {
                    super(props);
                    this.state = {
                        text: "aaa"
                    };
                }
      
                componentDidMount() {
                    logger("A did mount");
                    console.log("xxxxxxx")
                    ReactDOM.render(<div><A text="111"/><B text="222"/><C text="333"/></div>, div);
                
                }
                componentWillReceiveProps(){
                    logger("A will receive");
                }
                componentDidUpdate() {
                    logger("A did update");
                    if(flag){
                        flag = 0;
                        ReactDOM.render(<div><A text="111"/><B text="222"/><C text="333"/></div>, div);
                    }
      
                }
                render() {
                    return <div>{this.state.text}</div>;
                }
            }
            class B extends React.Component {
                constructor(props) {
                    super(props);
                    this.state = {
                        text: "bbb"
                    };
                }
      
                componentDidMount() {
              
                    logger("B did mount");
                }
                componentWillReceiveProps(){
                    logger("B will receive");
                }
                componentDidUpdate() {
                    logger("B did update");
                }
                render() {
                    return <div>{this.state.text}</div>;
                }
            }
            class C extends React.Component {
                constructor(props) {
                    super(props);
                    this.state = {
                        text: "ccc"
                    };
                }
                componentWillReceiveProps(){
                    logger("C will receive");
                }
                componentDidMount() {
                    logger("C did mount");
                }
                componentDidUpdate() {
                    logger("C did update");
                }
                render() {
                    return <div>{this.state.text}</div>;
                }
            }
            var s = ReactDOM.render(<div><A/><B/><C/></div>, div);
            expect(list.join("\n")).toBe([
                "A did mount",
                "B did mount",
                "C did mount",
                "A will receive",
                "B will receive",
                "C will receive",
                "A did update",
                "B did update",
                "C did update",
                "A will receive",
                "B will receive",
                "C will receive",
                "A did update",
                "B did update",
                "C did update"
            ].join("\n"));
      
              
</script>


</html>