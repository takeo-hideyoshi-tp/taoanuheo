<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type='text/javascript' src="./dist/React.js"></script>
    <!--<script type='text/javascript' src="./lib/ReactTestUtils.js"></script>-->

    <script type='text/javascript' src="./lib/babel.js"></script>
    <script type="text/babel">

      </script>
</head>

<body>

    <pre>应该等于
           
          
        </pre>
    <h1 id='example' class="root">

    </h1>
    <script type='text/babel'>
           var container = document.getElementById("example")
           var div = container
            var PropTypes = React.PropTypes
            if(!window.ReactDOM){
              window.ReactDOM = React
            }
            var expect = function(a) {
                return {
                    toBe: function(b) {
                        console.log(a,"vs", b, a === b)
                    },
                    toEqual(b){
                        console.log(a,"vs", b, a +""=== b+"")
                    },
                }
            }  
        var body = document.body;
        var container = document.createElement("div");
        body.appendChild(container);
      
       
function initRMQ(array){
    var dpmin = [], dpmax = [];
  
    var n = array.length;
    //注意， 它是以1为起点，因此我们需要在原数组前补上一个空元素
    for(let i = 0; i < n; i++) { 
        if(!dpmin[i]){
            dpmin[i] = [];
            dpmin[i][0] = array[i];
            dpmax[i] = [];
            dpmax[i][0] = array[i];
        }
    } 
    var m = Math.log(n*1.0)/Math.log(2.0);//用于划分区间
    for(let j = 1;  j <= m; j++){   
        for(let i = 0; i+(1<<j)-1< n; i++){  //区间起点  
            dpmax[i][j] = Math.max(dpmax[i][j-1],dpmax[i+(1<<(j-1))][j-1]);  
            dpmin[i][j] = Math.min(dpmin[i][j-1],dpmin[i+(1<<(j-1))][j-1]);  
        }  
    }  
    console.log(dpmax)
    return [dpmin, dpmax];
}

function getRMQmax(L, R, dpmax){
    var k = Math.log(R-L) / Math.LN2;
    k = Math.floor(k)
    console.log(k)
    return Math.max(dpmax[L][k],dpmax[R-(1<<k)+1][k]);
}

function getRMQmin(L, R, dpmin){
    var k = Math.log(R-L)/Math.LN2; 
    k = Math.floor(k)
    return Math.min(dpmin[L][k],dpmin[R-(1<<k)+1][k]);
}
var array = [3,2,4,5,6,8,1,2,9,7];
var [dpmin, dpmax] = initRMQ(array);
console.log(getRMQmax(0 ,8, dpmax)); // getMax(array.slice(0, 8))  8
console.log(getRMQmax(0 ,5, dpmax)); // getMax(array.slice(0,5)) 6

</script>

</body>

</html>