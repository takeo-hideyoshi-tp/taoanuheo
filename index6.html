<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">   
   <script type='text/javascript' src="./dist/React.js"></script>

   <!--<script type='text/javascript' src="./test/react.development.js"></script>
   <script type='text/javascript' src="./test/react-dom.development.js"></script>-->
   
    <script type='text/javascript' src="./lib/babel.js"></script>

</head>
<body>
    
        <pre>应该等于
              
          
        </pre>
        <h1 id='example' class="root">

        </h1>
        <script type='text/babel'>
            var container = document.getElementById("example")
            var div = container
            var PropTypes = React.PropTypes
            if(!window.ReactDOM){
              window.ReactDOM = React
            }
            var expect = function(a) {
                return {
                    toBe: function(b) {
                        console.log(a, "\n\rvs\n\r",b, a === b)
                    }
                }
            }
            var list = [];
            function logger(e) {
                list.push(e);
            }
            var A = class extends React.Component {
                componentWillMount() {
                    logger(this.props.name + " componentWillMount");
                }
                render() {
                    return <div />;
                }
                componentDidMount() {
                    logger(this.props.name + " componentDidMount");
                }
                componentDidUpdate() {
                    logger(this.props.name + " componentDidUpdate");
                }
                componentWillUnmount() {
                    logger(this.props.name + " componentWillUnmount");
                }
            };
            var B = class extends React.Component {
                componentWillMount() {
                    logger(this.props.name + " componentWillMount");
                }
                render() {
                    return <strong />;
                }
                componentDidMount() {
                    logger(this.props.name + " componentDidMount");
                }
                componentWillUnmount() {
                    logger(this.props.name + " componentWillUnmount");
                }
            };
            ReactDOM.render(
                <div>
                    <A
                        key="aa"
                        name="a"
                        ref={a => {
                            logger("a " + !!a);
                        }}
                    />
                    <A
                        key="bb"
                        name="b"
                        ref={a => {
                            logger("b " + !!a);
                        }}
                    />
                </div>,
                div
            );
            logger("update...");
            ReactDOM.render(
                <div>
                    <B
                        name="c"
                        ref={a => {
                            logger("c " + !!a);
                        }}
                    />
                    <B
                        name="d"
                        ref={a => {
                            logger("d " + !!a);
                        }}
                    />
                </div>,
                div
            );
            expect(list.join("\n")).toBe(
                [
                    "a componentWillMount",
                    "b componentWillMount",
                    "a componentDidMount",
                    "a true",
                    "b componentDidMount",
                    "b true",
                    "update...",
                    "c componentWillMount",
                    "d componentWillMount",
                    "a false",
                    "a componentWillUnmount",
                    "b false",
                    "b componentWillUnmount",
                    "c componentDidMount",
                    "c true",
                    "d componentDidMount",
                    "d true"
                ].join("\n")
            );
            
          </script>


</body>
    
 </html>